{"version":3,"sources":["components/Loader.js","components/Message.js","containers/LoadAndErrorContainer.js","actions/postActions.js","../node_modules/medium-zoom/dist/medium-zoom.esm.js","components/PhotoZoom.js","components/Photo.js","outils/TsarList.js","Modal/ConfirmModal.js","../node_modules/react-bootstrap/esm/ElementChildren.js","constants/imageConstants.js","actions/imageActions.js","components/CEPostForm.js","../node_modules/react-bootstrap/esm/ProgressBar.js","components/DropZone .js","screens/EditPostScreen.js"],"names":["Loader","className","animation","role","style","position","width","height","margin","display","Message","variant","children","useState","show","setShow","useEffect","onClose","dismissible","defaultProps","LoadAndErrorContainer","loading","title","setShowModal","activeBtn","filter","message","useSelector","state","successMsg","error","errorMsg","to","onClick","getAuthInfo","getState","userInfo","userLogin","setHeaderToken","userToken","token","headers","Authorization","listPosts","dispatch","a","type","POST_LIST_REQUEST","axios","get","data","POST_LIST_SUCCESS","payload","posts","POST_LIST_FAIL","response","onePost","id","config","POST_ONE_REQUEST","POST_ONE_SUCCESS","post","POST_ONE_FAIL","editPost","property","postOne","EDIT_POST_REQUEST","put","EDIT_POST_SUCCESS","certificate","description","bitkin","petrov","imperator","link_video","EDIT_POST_FAIL","addLikePost","body","postList","_id","userT","user","tokenUser","toString","split","reverse","join","ADD_LIKE_REQUEST","ADD_LIKE_SUCCESS","map","likes","unshift","userId","name","ADD_LIKE_FAIL","addLikeComment","ADD_LIKE_COMMENT_REQUEST","ADD_LIKE_COMMENT_SUCCESS","ADD_LIKE_COMMENT_FAIL","addCommentPost","newComment","comments","comment","deleteCommentPost","DELETE_POST_REQUEST","delete","DELETE_POST_SUCCESS","newComments","item","DELETE_POST_FAIL","editComment","EDIT_COMMENT_REQUEST","EDIT_COMMENT_FAIL","reportSomeComment","REPORT_COMMENT_REQUEST","REPORT_COMMENT_SUCCESS","REPORT_COMMENT_FAIL","filterActivePost","POST_ACTIVE_FILTER_LIST","filterPost","filteredPosts","task","Object","keys","every","filterAttribute","some","filterValue","POST_FILTER_LIST","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","isSupported","node","tagName","isNode","selector","nodeType","isSvg","image","currentSrc","src","substr","toLowerCase","getImagesFromSelector","Array","isArray","NodeList","isPrototypeOf","isNodeList","slice","document","querySelectorAll","err","TypeError","createOverlay","background","overlay","createElement","classList","add","cloneTarget","template","_template$getBounding","getBoundingClientRect","top","left","clone","cloneNode","scrollTop","window","pageYOffset","documentElement","scrollLeft","pageXOffset","removeAttribute","transform","createCustomEvent","params","eventParams","bubbles","cancelable","detail","undefined","CustomEvent","customEvent","createEvent","initCustomEvent","css","ref","insertAt","head","getElementsByTagName","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","styleInject","mediumZoom","options","Promise","fn","noop","_handleClick","event","images","indexOf","toggle","close","_handleScroll","isAnimating","active","original","currentScroll","Math","abs","zoomOptions","scrollOffset","setTimeout","_handleKeyUp","keyCode","update","newOptions","container","querySelector","forEach","dispatchEvent","zoom","attach","_len","selectors","_key","newImages","reduce","imagesAccumulator","currentSelector","concat","newImage","push","eventListeners","_ref","listener","addEventListener","detach","_len2","_key2","zoomed","imagesToDetach","remove","on","off","removeEventListener","eventListener","open","_ref2","_animate","clientWidth","clientHeight","right","bottom","viewportWidth","viewportHeight","_zoomContainer$getBou","_width","_height","_left","_top","zoomTarget","zoomedHd","naturalWidth","naturalHeight","_zoomTarget$getBoundi","scaleX","min","scaleY","scale","resolve","_images","content","requestAnimationFrame","_handleOpenEnd","getAttribute","onerror","clearInterval","getZoomTargetSize","console","warn","setInterval","complete","hasAttribute","loadEventListener","transition","opacity","_handleCloseEnd","removeChild","_ref3","getOptions","getImages","getZoomedImage","PhotoZoom","alt","zoomRef","useRef","Image","current","Photo","photo","postTitle","route","styleClass","link","img","setImg","imgRef","IntersectionObserver","enteries","observer","entry","isIntersecting","disconnect","observe","registerObserver","Spinner","tsars","photoPath","ConfirmModal","showModal","infoModal","executeInMenuItem","setComment","handleClose","onHide","keyboard","Header","closeButton","Title","header","Body","Group","controlId","Control","as","rows","defaultValue","onChange","e","value","Footer","footer","func","index","React","Children","child","isValidElement","DELETE_IMAGE_SUCCESS","DELETE_IMAGE_REQUEST","DELETE_IMAGE_FAIL","CEPostForm","submitHandler","setTitle","setBitkin","setPetrov","setImperator","setLink_video","setCertificate","setDescription","textBtn","checkFlagScreen","Form","onSubmit","Label","placeholder","disabled","tsar","certif","Button","getPercentage","now","max","percentage","round","renderProgressBar","_classNames","label","srOnly","striped","animated","bsPrefix","props","_objectWithoutPropertiesLoose","classNames","ProgressBar","forwardRef","isChild","useBootstrapPrefix","wrapperProps","cloneElement","displayName","Dropzone","uploadPercentage","setUploadPercentage","cancelFileUpload","fileInputRef","modalImageRef","modalRef","uploadRef","uploadModalRef","selectedFiles","setSelectedFiles","validFiles","setValidFiles","unsupportedFiles","setUnsupportedFiles","errorMessage","setErrorMessage","filteredArr","acc","find","handleFiles","files","validateFile","prevArray","removeFile","findIndex","index2","index3","splice","file","fileSize","size","floor","log","parseFloat","pow","toFixed","uploadFiles","scrollTo","behavior","innerHTML","firebaseImg","createImgUrl","path","storage","snapshot","percent","bytesTransferred","totalBytes","getDownloadURL","then","url","objImage","postId","imgName","onUploadProgress","progressEvent","loaded","total","cancelToken","CancelToken","cancel","catch","onDragOver","preventDefault","onDragEnter","onDragLeave","onDrop","dataTransfer","click","multiple","fileName","substring","lastIndexOf","invalid","reader","FileReader","readAsDataURL","onload","backgroundImage","result","openImageModal","EditPost","history","match","idImage","setIdImage","pathFirebaseImg","setPathFirebaseImg","photos","setPhotos","setInfoModal","firstElement","useDispatch","POST_ONE_RESET","countNumberPhotos","showConfirmModal","pathFirebaseUrlImg","idPhoto","newPhotos","res"],"mappings":"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","file":"static/js/1.ece88299.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Spinner } from 'react-bootstrap';\r\nimport '../styles/Loader.scss';\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className=\"loader-overlow\">\r\n      <Spinner\r\n        animation=\"border\"\r\n        role=\"status\"\r\n        style={{\r\n          position: 'absolute',\r\n          width: '100px',\r\n          height: '100px',\r\n          margin: 'auto',\r\n          display: 'block',\r\n        }}\r\n      >\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </Spinner>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Alert } from 'react-bootstrap';\r\n// debugger;\r\n\r\nconst Message = ({ variant, children }) => {\r\n  const [show, setShow] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // setTimeout(() => {\r\n    //   closeAlert();\r\n    // }, 3000);\r\n  });\r\n\r\n  const closeAlert = () => {\r\n    setShow(false);\r\n  };\r\n\r\n  return (\r\n    <Alert\r\n      show={show}\r\n      variant={variant}\r\n      children={children}\r\n      onClose={() => closeAlert()}\r\n      dismissible\r\n    >\r\n      {children}\r\n    </Alert>\r\n  );\r\n};\r\n\r\nMessage.defaultProps = {\r\n  variant: 'info',\r\n};\r\n\r\nexport default Message;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Container, Row } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport '../styles/LoadAndErrorContainer.scss';\r\n\r\nconst LoadAndErrorContainer = ({\r\n  children,\r\n  loading,\r\n  title,\r\n  setShowModal,\r\n  activeBtn,\r\n  filter,\r\n}) => {\r\n  const { message } = useSelector((state) => state.successMsg);\r\n  const { error } = useSelector((state) => state.errorMsg);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"panel-back\">\r\n        <Container>\r\n          {!activeBtn && (\r\n            <Link to=\"/\" className=\"btn btn-light my-3\">\r\n              Go back\r\n            </Link>\r\n          )}\r\n\r\n          <span>{title}</span>\r\n          {filter && (\r\n            <i\r\n              className=\"fas fa-filter btn__filter\"\r\n              onClick={() => setShowModal(true)}\r\n            ></i>\r\n          )}\r\n        </Container>\r\n      </div>\r\n      {loading && <Loader />}\r\n      {error && <Message variant=\"danger\">{error}</Message>}\r\n      {message && <Message variant=\"success\">{message}</Message>}\r\n      <Row>{children}</Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoadAndErrorContainer;\r\n","import {\r\n  POST_LIST_REQUEST,\r\n  POST_LIST_SUCCESS,\r\n  POST_LIST_FAIL,\r\n  POST_ACTIVE_FILTER_LIST,\r\n  POST_FILTER_LIST,\r\n  ADD_LIKE_REQUEST,\r\n  ADD_LIKE_SUCCESS,\r\n  ADD_LIKE_FAIL,\r\n  POST_ONE_REQUEST,\r\n  POST_ONE_SUCCESS,\r\n  POST_ONE_FAIL,\r\n  ADD_LIKE_COMMENT_REQUEST,\r\n  ADD_LIKE_COMMENT_SUCCESS,\r\n  ADD_LIKE_COMMENT_FAIL,\r\n  CREATE_POST_REQUEST,\r\n  CREATE_POST_SUCCESS,\r\n  CREATE_POST_FAIL,\r\n  EDIT_POST_REQUEST,\r\n  EDIT_POST_SUCCESS,\r\n  EDIT_POST_FAIL,\r\n  DELETE_POST_SUCCESS,\r\n  DELETE_POST_REQUEST,\r\n  DELETE_POST_FAIL,\r\n  EDIT_COMMENT_REQUEST,\r\n  EDIT_COMMENT_FAIL,\r\n  REPORT_COMMENT_REQUEST,\r\n  REPORT_COMMENT_SUCCESS,\r\n  REPORT_COMMENT_FAIL,\r\n} from '../constants/postConstants';\r\nimport axios from 'axios';\r\n\r\nexport const getAuthInfo = (getState) => {\r\n  const {\r\n    userLogin: { userInfo },\r\n  } = getState();\r\n  return setHeaderToken(userInfo);\r\n};\r\n\r\nexport const setHeaderToken = (userInfo) => {\r\n  let userToken;\r\n  if (userInfo !== null) {\r\n    userToken = userInfo.token;\r\n  } else {\r\n    userToken = userInfo;\r\n  }\r\n  return {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${userToken}`,\r\n    },\r\n  };\r\n};\r\n\r\n/**************************************************************************************************** */\r\nexport const listPosts = () => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: POST_LIST_REQUEST });\r\n    const { data } = await axios.get('/api/post/');\r\n    dispatch({ type: POST_LIST_SUCCESS, payload: data.posts });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: POST_LIST_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const onePost = (id) => async (dispatch, getState) => {\r\n  const config = getAuthInfo(getState);\r\n\r\n  try {\r\n    dispatch({ type: POST_ONE_REQUEST });\r\n    const { data } = await axios.get('/api/post/' + id, config);\r\n    dispatch({ type: POST_ONE_SUCCESS, payload: data.post });\r\n  } catch (error) {\r\n    dispatch({ type: POST_ONE_FAIL });\r\n  }\r\n};\r\n\r\nexport const createPost = (args) => async (dispatch, getState) => {\r\n  const config = getAuthInfo(getState);\r\n\r\n  try {\r\n    dispatch({ type: CREATE_POST_REQUEST });\r\n    const { data } = await axios.post('/api/post/add-post', args, config);\r\n    dispatch({ type: CREATE_POST_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    dispatch({ type: CREATE_POST_FAIL });\r\n  }\r\n};\r\n\r\nexport const editPost = (id, property) => async (dispatch, getState) => {\r\n  const config = getAuthInfo(getState);\r\n  const {\r\n    postOne: { post },\r\n  } = getState();\r\n\r\n  try {\r\n    dispatch({ type: EDIT_POST_REQUEST });\r\n\r\n    const { data } = await axios.put(\r\n      '/api/post/edit-post/' + id,\r\n      property,\r\n      config\r\n    );\r\n\r\n    dispatch({ type: EDIT_POST_SUCCESS, payload: data.message });\r\n\r\n    let {\r\n      title,\r\n      certificate,\r\n      description,\r\n      bitkin,\r\n      petrov,\r\n      imperator,\r\n      link_video,\r\n    } = post;\r\n    title = property.title;\r\n    certificate = property.certificate;\r\n    description = property.description;\r\n    bitkin = property.bitkin;\r\n    petrov = property.petrov;\r\n    imperator = property.imperator;\r\n    link_video = property.link_video;\r\n\r\n    dispatch({\r\n      type: POST_ONE_SUCCESS,\r\n      payload: {\r\n        ...post,\r\n        title,\r\n        certificate,\r\n        description,\r\n        bitkin,\r\n        petrov,\r\n        imperator,\r\n        link_video,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    dispatch({ type: EDIT_POST_FAIL });\r\n  }\r\n};\r\n\r\nexport const addLikePost = (body, post) => async (dispatch, getState) => {\r\n  const config = getAuthInfo(getState);\r\n  const {\r\n    userLogin: { userInfo },\r\n    postList: { posts },\r\n  } = getState();\r\n\r\n  const { _id } = post;\r\n\r\n  const userT = userInfo.user.tokenUser.toString().split('').reverse().join('');\r\n\r\n  try {\r\n    dispatch({ type: ADD_LIKE_REQUEST });\r\n    const { data } = await axios.post('/api/post/like-post', body, config);\r\n    dispatch({ type: ADD_LIKE_SUCCESS, payload: data });\r\n\r\n    posts.map((post) => {\r\n      return (\r\n        post._id === _id &&\r\n        post.likes.unshift({ userId: userT, _id: 1, name: userInfo.user.name })\r\n      );\r\n    });\r\n  } catch (error) {\r\n    dispatch({ type: ADD_LIKE_FAIL });\r\n  }\r\n};\r\n\r\nexport const addLikeComment = (body) => async (dispatch, getState) => {\r\n  const config = getAuthInfo(getState);\r\n\r\n  try {\r\n    dispatch({ type: ADD_LIKE_COMMENT_REQUEST });\r\n    const { data } = await axios.post('/api/post/like-comment', body, config);\r\n    dispatch({ type: ADD_LIKE_COMMENT_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    dispatch({ type: ADD_LIKE_COMMENT_FAIL });\r\n  }\r\n};\r\n\r\nexport const addCommentPost = (body) => async (dispatch, getState) => {\r\n  const config = getAuthInfo(getState);\r\n  const {\r\n    postOne: { post },\r\n  } = getState();\r\n\r\n  /**Use dispatch POST ONE for creation */\r\n  try {\r\n    const { data } = await axios.post('/api/post/add-comment', body, config);\r\n    const newComment = post.comments.unshift({\r\n      comment: data.comment,\r\n    });\r\n    dispatch({ type: POST_ONE_SUCCESS, payload: { ...post, newComment } });\r\n  } catch (error) {\r\n    dispatch({ type: POST_ONE_FAIL });\r\n  }\r\n};\r\n\r\nexport const deleteCommentPost = (id) => async (dispatch, getState) => {\r\n  const config = getAuthInfo(getState);\r\n  const {\r\n    postOne: { post },\r\n  } = getState();\r\n\r\n  try {\r\n    dispatch({ type: DELETE_POST_REQUEST });\r\n    const { data } = await axios.delete(\r\n      '/api/post/comment/delete/' + id,\r\n      config\r\n    );\r\n    dispatch({ type: DELETE_POST_SUCCESS, payload: data });\r\n    const newComments = post.comments.filter(\r\n      (item) => item['comment']['_id'] !== id\r\n    );\r\n    dispatch({\r\n      type: POST_ONE_SUCCESS,\r\n      payload: { ...post, comments: newComments },\r\n    });\r\n  } catch (error) {\r\n    dispatch({ type: DELETE_POST_FAIL });\r\n  }\r\n};\r\n\r\nexport const editComment = (id, body) => async (dispatch, getState) => {\r\n  const config = getAuthInfo(getState);\r\n\r\n  try {\r\n    dispatch({ type: EDIT_COMMENT_REQUEST });\r\n    await axios.put('/api/post/edit-comment/' + id, body, config);\r\n    // dispatch({ type: EDIT_COMMENT_SUCCESS, payload: data });\r\n    dispatch({ type: POST_ONE_SUCCESS });\r\n  } catch (error) {\r\n    dispatch({ type: EDIT_COMMENT_FAIL });\r\n  }\r\n};\r\n\r\nexport const reportSomeComment = (body) => async (dispatch, getState) => {\r\n  const config = getAuthInfo(getState);\r\n\r\n  try {\r\n    dispatch({ type: REPORT_COMMENT_REQUEST });\r\n    const { data } = await axios.post(`/api/post/report-comment`, body, config);\r\n    dispatch({ type: REPORT_COMMENT_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    dispatch({ type: REPORT_COMMENT_FAIL });\r\n  }\r\n};\r\n\r\nexport const filterActivePost = (property) => (dispatch) => {\r\n  dispatch({ type: POST_ACTIVE_FILTER_LIST, payload: property });\r\n};\r\n\r\nexport const filterPost = (property) => (dispatch, getState) => {\r\n  const {\r\n    postList: { posts },\r\n  } = getState();\r\n\r\n  const filteredPosts = posts.filter((task) => {\r\n    return Object.keys(property).every((filterAttribute) => {\r\n      return property[filterAttribute].some((filterValue) => {\r\n        return filterValue === task[filterAttribute];\r\n      });\r\n    });\r\n  });\r\n\r\n  dispatch({ type: POST_FILTER_LIST, payload: filteredPosts });\r\n};\r\n","/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar isSupported = function isSupported(node) {\n  return node.tagName === 'IMG';\n};\n\n/* eslint-disable-next-line no-prototype-builtins */\nvar isNodeList = function isNodeList(selector) {\n  return NodeList.prototype.isPrototypeOf(selector);\n};\n\nvar isNode = function isNode(selector) {\n  return selector && selector.nodeType === 1;\n};\n\nvar isSvg = function isSvg(image) {\n  var source = image.currentSrc || image.src;\n  return source.substr(-4).toLowerCase() === '.svg';\n};\n\nvar getImagesFromSelector = function getImagesFromSelector(selector) {\n  try {\n    if (Array.isArray(selector)) {\n      return selector.filter(isSupported);\n    }\n\n    if (isNodeList(selector)) {\n      // Do not use spread operator or Array.from() for IE support\n      return [].slice.call(selector).filter(isSupported);\n    }\n\n    if (isNode(selector)) {\n      return [selector].filter(isSupported);\n    }\n\n    if (typeof selector === 'string') {\n      // Do not use spread operator or Array.from() for IE support\n      return [].slice.call(document.querySelectorAll(selector)).filter(isSupported);\n    }\n\n    return [];\n  } catch (err) {\n    throw new TypeError('The provided selector is invalid.\\n' + 'Expects a CSS selector, a Node element, a NodeList or an array.\\n' + 'See: https://github.com/francoischalifour/medium-zoom');\n  }\n};\n\nvar createOverlay = function createOverlay(background) {\n  var overlay = document.createElement('div');\n  overlay.classList.add('medium-zoom-overlay');\n  overlay.style.background = background;\n\n  return overlay;\n};\n\nvar cloneTarget = function cloneTarget(template) {\n  var _template$getBounding = template.getBoundingClientRect(),\n      top = _template$getBounding.top,\n      left = _template$getBounding.left,\n      width = _template$getBounding.width,\n      height = _template$getBounding.height;\n\n  var clone = template.cloneNode();\n  var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n  var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;\n\n  clone.removeAttribute('id');\n  clone.style.position = 'absolute';\n  clone.style.top = top + scrollTop + 'px';\n  clone.style.left = left + scrollLeft + 'px';\n  clone.style.width = width + 'px';\n  clone.style.height = height + 'px';\n  clone.style.transform = '';\n\n  return clone;\n};\n\nvar createCustomEvent = function createCustomEvent(type, params) {\n  var eventParams = _extends({\n    bubbles: false,\n    cancelable: false,\n    detail: undefined\n  }, params);\n\n  if (typeof window.CustomEvent === 'function') {\n    return new CustomEvent(type, eventParams);\n  }\n\n  var customEvent = document.createEvent('CustomEvent');\n  customEvent.initCustomEvent(type, eventParams.bubbles, eventParams.cancelable, eventParams.detail);\n\n  return customEvent;\n};\n\nvar mediumZoom = function mediumZoom(selector) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  /**\n   * Ensure the compatibility with IE11 if no Promise polyfill are used.\n   */\n  var Promise = window.Promise || function Promise(fn) {\n    function noop() {}\n    fn(noop, noop);\n  };\n\n  var _handleClick = function _handleClick(event) {\n    var target = event.target;\n\n\n    if (target === overlay) {\n      close();\n      return;\n    }\n\n    if (images.indexOf(target) === -1) {\n      return;\n    }\n\n    toggle({ target: target });\n  };\n\n  var _handleScroll = function _handleScroll() {\n    if (isAnimating || !active.original) {\n      return;\n    }\n\n    var currentScroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n\n    if (Math.abs(scrollTop - currentScroll) > zoomOptions.scrollOffset) {\n      setTimeout(close, 150);\n    }\n  };\n\n  var _handleKeyUp = function _handleKeyUp(event) {\n    var key = event.key || event.keyCode;\n\n    // Close if escape key is pressed\n    if (key === 'Escape' || key === 'Esc' || key === 27) {\n      close();\n    }\n  };\n\n  var update = function update() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var newOptions = options;\n\n    if (options.background) {\n      overlay.style.background = options.background;\n    }\n\n    if (options.container && options.container instanceof Object) {\n      newOptions.container = _extends({}, zoomOptions.container, options.container);\n    }\n\n    if (options.template) {\n      var template = isNode(options.template) ? options.template : document.querySelector(options.template);\n\n      newOptions.template = template;\n    }\n\n    zoomOptions = _extends({}, zoomOptions, newOptions);\n\n    images.forEach(function (image) {\n      image.dispatchEvent(createCustomEvent('medium-zoom:update', {\n        detail: { zoom: zoom }\n      }));\n    });\n\n    return zoom;\n  };\n\n  var clone = function clone() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return mediumZoom(_extends({}, zoomOptions, options));\n  };\n\n  var attach = function attach() {\n    for (var _len = arguments.length, selectors = Array(_len), _key = 0; _key < _len; _key++) {\n      selectors[_key] = arguments[_key];\n    }\n\n    var newImages = selectors.reduce(function (imagesAccumulator, currentSelector) {\n      return [].concat(imagesAccumulator, getImagesFromSelector(currentSelector));\n    }, []);\n\n    newImages.filter(function (newImage) {\n      return images.indexOf(newImage) === -1;\n    }).forEach(function (newImage) {\n      images.push(newImage);\n      newImage.classList.add('medium-zoom-image');\n    });\n\n    eventListeners.forEach(function (_ref) {\n      var type = _ref.type,\n          listener = _ref.listener,\n          options = _ref.options;\n\n      newImages.forEach(function (image) {\n        image.addEventListener(type, listener, options);\n      });\n    });\n\n    return zoom;\n  };\n\n  var detach = function detach() {\n    for (var _len2 = arguments.length, selectors = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      selectors[_key2] = arguments[_key2];\n    }\n\n    if (active.zoomed) {\n      close();\n    }\n\n    var imagesToDetach = selectors.length > 0 ? selectors.reduce(function (imagesAccumulator, currentSelector) {\n      return [].concat(imagesAccumulator, getImagesFromSelector(currentSelector));\n    }, []) : images;\n\n    imagesToDetach.forEach(function (image) {\n      image.classList.remove('medium-zoom-image');\n      image.dispatchEvent(createCustomEvent('medium-zoom:detach', {\n        detail: { zoom: zoom }\n      }));\n    });\n\n    images = images.filter(function (image) {\n      return imagesToDetach.indexOf(image) === -1;\n    });\n\n    return zoom;\n  };\n\n  var on = function on(type, listener) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    images.forEach(function (image) {\n      image.addEventListener('medium-zoom:' + type, listener, options);\n    });\n\n    eventListeners.push({ type: 'medium-zoom:' + type, listener: listener, options: options });\n\n    return zoom;\n  };\n\n  var off = function off(type, listener) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    images.forEach(function (image) {\n      image.removeEventListener('medium-zoom:' + type, listener, options);\n    });\n\n    eventListeners = eventListeners.filter(function (eventListener) {\n      return !(eventListener.type === 'medium-zoom:' + type && eventListener.listener.toString() === listener.toString());\n    });\n\n    return zoom;\n  };\n\n  var open = function open() {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        target = _ref2.target;\n\n    var _animate = function _animate() {\n      var container = {\n        width: document.documentElement.clientWidth,\n        height: document.documentElement.clientHeight,\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0\n      };\n      var viewportWidth = void 0;\n      var viewportHeight = void 0;\n\n      if (zoomOptions.container) {\n        if (zoomOptions.container instanceof Object) {\n          // The container is given as an object with properties like width, height, left, top\n          container = _extends({}, container, zoomOptions.container);\n\n          // We need to adjust custom options like container.right or container.bottom\n          viewportWidth = container.width - container.left - container.right - zoomOptions.margin * 2;\n          viewportHeight = container.height - container.top - container.bottom - zoomOptions.margin * 2;\n        } else {\n          // The container is given as an element\n          var zoomContainer = isNode(zoomOptions.container) ? zoomOptions.container : document.querySelector(zoomOptions.container);\n\n          var _zoomContainer$getBou = zoomContainer.getBoundingClientRect(),\n              _width = _zoomContainer$getBou.width,\n              _height = _zoomContainer$getBou.height,\n              _left = _zoomContainer$getBou.left,\n              _top = _zoomContainer$getBou.top;\n\n          container = _extends({}, container, {\n            width: _width,\n            height: _height,\n            left: _left,\n            top: _top\n          });\n        }\n      }\n\n      viewportWidth = viewportWidth || container.width - zoomOptions.margin * 2;\n      viewportHeight = viewportHeight || container.height - zoomOptions.margin * 2;\n\n      var zoomTarget = active.zoomedHd || active.original;\n      var naturalWidth = isSvg(zoomTarget) ? viewportWidth : zoomTarget.naturalWidth || viewportWidth;\n      var naturalHeight = isSvg(zoomTarget) ? viewportHeight : zoomTarget.naturalHeight || viewportHeight;\n\n      var _zoomTarget$getBoundi = zoomTarget.getBoundingClientRect(),\n          top = _zoomTarget$getBoundi.top,\n          left = _zoomTarget$getBoundi.left,\n          width = _zoomTarget$getBoundi.width,\n          height = _zoomTarget$getBoundi.height;\n\n      var scaleX = Math.min(naturalWidth, viewportWidth) / width;\n      var scaleY = Math.min(naturalHeight, viewportHeight) / height;\n      var scale = Math.min(scaleX, scaleY);\n      var translateX = (-left + (viewportWidth - width) / 2 + zoomOptions.margin + container.left) / scale;\n      var translateY = (-top + (viewportHeight - height) / 2 + zoomOptions.margin + container.top) / scale;\n      var transform = 'scale(' + scale + ') translate3d(' + translateX + 'px, ' + translateY + 'px, 0)';\n\n      active.zoomed.style.transform = transform;\n\n      if (active.zoomedHd) {\n        active.zoomedHd.style.transform = transform;\n      }\n    };\n\n    return new Promise(function (resolve) {\n      if (target && images.indexOf(target) === -1) {\n        resolve(zoom);\n        return;\n      }\n\n      var _handleOpenEnd = function _handleOpenEnd() {\n        isAnimating = false;\n        active.zoomed.removeEventListener('transitionend', _handleOpenEnd);\n        active.original.dispatchEvent(createCustomEvent('medium-zoom:opened', {\n          detail: { zoom: zoom }\n        }));\n\n        resolve(zoom);\n      };\n\n      if (active.zoomed) {\n        resolve(zoom);\n        return;\n      }\n\n      if (target) {\n        // The zoom was triggered manually via a click\n        active.original = target;\n      } else if (images.length > 0) {\nvar _images = images;\n        active.original = _images[0];\n      } else {\n        resolve(zoom);\n        return;\n      }\n\n      active.original.dispatchEvent(createCustomEvent('medium-zoom:open', {\n        detail: { zoom: zoom }\n      }));\n\n      scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n      isAnimating = true;\n      active.zoomed = cloneTarget(active.original);\n\n      document.body.appendChild(overlay);\n\n      if (zoomOptions.template) {\n        var template = isNode(zoomOptions.template) ? zoomOptions.template : document.querySelector(zoomOptions.template);\n        active.template = document.createElement('div');\n        active.template.appendChild(template.content.cloneNode(true));\n\n        document.body.appendChild(active.template);\n      }\n\n      document.body.appendChild(active.zoomed);\n\n      window.requestAnimationFrame(function () {\n        document.body.classList.add('medium-zoom--opened');\n      });\n\n      active.original.classList.add('medium-zoom-image--hidden');\n      active.zoomed.classList.add('medium-zoom-image--opened');\n\n      active.zoomed.addEventListener('click', close);\n      active.zoomed.addEventListener('transitionend', _handleOpenEnd);\n\n      if (active.original.getAttribute('data-zoom-src')) {\n        active.zoomedHd = active.zoomed.cloneNode();\n\n        // Reset the `scrset` property or the HD image won't load.\n        active.zoomedHd.removeAttribute('srcset');\n        active.zoomedHd.removeAttribute('sizes');\n\n        active.zoomedHd.src = active.zoomed.getAttribute('data-zoom-src');\n\n        active.zoomedHd.onerror = function () {\n          clearInterval(getZoomTargetSize);\n          console.warn('Unable to reach the zoom image target ' + active.zoomedHd.src);\n          active.zoomedHd = null;\n          _animate();\n        };\n\n        // We need to access the natural size of the full HD\n        // target as fast as possible to compute the animation.\n        var getZoomTargetSize = setInterval(function () {\n          if ( active.zoomedHd.complete) {\n            clearInterval(getZoomTargetSize);\n            active.zoomedHd.classList.add('medium-zoom-image--opened');\n            active.zoomedHd.addEventListener('click', close);\n            document.body.appendChild(active.zoomedHd);\n            _animate();\n          }\n        }, 10);\n      } else if (active.original.hasAttribute('srcset')) {\n        // If an image has a `srcset` attribuet, we don't know the dimensions of the\n        // zoomed (HD) image (like when `data-zoom-src` is specified).\n        // Therefore the approach is quite similar.\n        active.zoomedHd = active.zoomed.cloneNode();\n\n        // Resetting the sizes attribute tells the browser to load the\n        // image best fitting the current viewport size, respecting the `srcset`.\n        active.zoomedHd.removeAttribute('sizes');\n\n        // In Firefox, the `loading` attribute needs to be set to `eager` (default\n        // value) for the load event to be fired.\n        active.zoomedHd.removeAttribute('loading');\n\n        // Wait for the load event of the hd image. This will fire if the image\n        // is already cached.\n        var loadEventListener = active.zoomedHd.addEventListener('load', function () {\n          active.zoomedHd.removeEventListener('load', loadEventListener);\n          active.zoomedHd.classList.add('medium-zoom-image--opened');\n          active.zoomedHd.addEventListener('click', close);\n          document.body.appendChild(active.zoomedHd);\n          _animate();\n        });\n      } else {\n        _animate();\n      }\n    });\n  };\n\n  var close = function close() {\n    return new Promise(function (resolve) {\n      if (isAnimating || !active.original) {\n        resolve(zoom);\n        return;\n      }\n\n      var _handleCloseEnd = function _handleCloseEnd() {\n        active.original.classList.remove('medium-zoom-image--hidden');\n        document.body.removeChild(active.zoomed);\n        if (active.zoomedHd) {\n          document.body.removeChild(active.zoomedHd);\n        }\n        document.body.removeChild(overlay);\n        active.zoomed.classList.remove('medium-zoom-image--opened');\n        if (active.template) {\n          document.body.removeChild(active.template);\n        }\n\n        isAnimating = false;\n        active.zoomed.removeEventListener('transitionend', _handleCloseEnd);\n\n        active.original.dispatchEvent(createCustomEvent('medium-zoom:closed', {\n          detail: { zoom: zoom }\n        }));\n\n        active.original = null;\n        active.zoomed = null;\n        active.zoomedHd = null;\n        active.template = null;\n\n        resolve(zoom);\n      };\n\n      isAnimating = true;\n      document.body.classList.remove('medium-zoom--opened');\n      active.zoomed.style.transform = '';\n\n      if (active.zoomedHd) {\n        active.zoomedHd.style.transform = '';\n      }\n\n      // Fade out the template so it's not too abrupt\n      if (active.template) {\n        active.template.style.transition = 'opacity 150ms';\n        active.template.style.opacity = 0;\n      }\n\n      active.original.dispatchEvent(createCustomEvent('medium-zoom:close', {\n        detail: { zoom: zoom }\n      }));\n\n      active.zoomed.addEventListener('transitionend', _handleCloseEnd);\n    });\n  };\n\n  var toggle = function toggle() {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        target = _ref3.target;\n\n    if (active.original) {\n      return close();\n    }\n\n    return open({ target: target });\n  };\n\n  var getOptions = function getOptions() {\n    return zoomOptions;\n  };\n\n  var getImages = function getImages() {\n    return images;\n  };\n\n  var getZoomedImage = function getZoomedImage() {\n    return active.original;\n  };\n\n  var images = [];\n  var eventListeners = [];\n  var isAnimating = false;\n  var scrollTop = 0;\n  var zoomOptions = options;\n  var active = {\n    original: null,\n    zoomed: null,\n    zoomedHd: null,\n    template: null\n\n    // If the selector is omitted, it's replaced by the options\n  };if (Object.prototype.toString.call(selector) === '[object Object]') {\n    zoomOptions = selector;\n  } else if (selector || typeof selector === 'string' // to process empty string as a selector\n  ) {\n      attach(selector);\n    }\n\n  // Apply the default option values\n  zoomOptions = _extends({\n    margin: 0,\n    background: '#fff',\n    scrollOffset: 40,\n    container: null,\n    template: null\n  }, zoomOptions);\n\n  var overlay = createOverlay(zoomOptions.background);\n\n  document.addEventListener('click', _handleClick);\n  document.addEventListener('keyup', _handleKeyUp);\n  document.addEventListener('scroll', _handleScroll);\n  window.addEventListener('resize', close);\n\n  var zoom = {\n    open: open,\n    close: close,\n    toggle: toggle,\n    update: update,\n    clone: clone,\n    attach: attach,\n    detach: detach,\n    on: on,\n    off: off,\n    getOptions: getOptions,\n    getImages: getImages,\n    getZoomedImage: getZoomedImage\n  };\n\n  return zoom;\n};\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css = \".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}\";\nstyleInject(css);\n\nexport default mediumZoom;\n","import React, { useRef } from 'react';\r\nimport { Image } from 'react-bootstrap';\r\n\r\nconst PhotoZoom = ({ zoom, src, background, className, alt }) => {\r\n  const zoomRef = useRef(zoom.clone({ background }));\r\n\r\n  const attachZoom = (image) => {\r\n    zoomRef.current.attach(image);\r\n  };\r\n\r\n  return <Image src={src} className={className} ref={attachZoom} alt={alt} />;\r\n};\r\n\r\nexport default PhotoZoom;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Spinner } from 'react-bootstrap';\r\n// import axios from 'axios';\r\nimport mediumZoom from 'medium-zoom';\r\nimport PhotoZoom from './PhotoZoom';\r\nimport '../styles/Photo.scss';\r\n\r\n// const fetchImage = async (route, user, name) => {\r\n//   const {\r\n//     config: { url },\r\n//   } = await axios.get(`/api/images/${route}/${user}/${name}`);\r\n//   return url;\r\n// };\r\n\r\nconst registerObserver = (ref, route, user, name, link, setImg) => {\r\n  const observer = new IntersectionObserver((enteries, observer) => {\r\n    enteries.forEach(async (entry) => {\r\n      if (!entry.isIntersecting) {\r\n        return;\r\n      }\r\n      /** WORK WITH THE SERVER NODE.JS */\r\n      // const url = await fetchImage(route, user, name);\r\n      // setImg(url);\r\n      setImg(link);\r\n      observer.disconnect();\r\n    });\r\n  });\r\n  observer.observe(ref);\r\n};\r\n\r\nconst Photo = ({ photo, postTitle, styleClass }) => {\r\n  const { route, user, name, link } = photo; // link work with firebase\r\n  const [img, setImg] = useState('');\r\n  const imgRef = useRef(null);\r\n  const zoom = useRef(mediumZoom());\r\n\r\n  useEffect(() => {\r\n    if (imgRef.current !== null) {\r\n      registerObserver(imgRef.current, route, user, name, link, setImg);\r\n    }\r\n  }, [route, user, name, link]);\r\n\r\n  if (img.length > 0) {\r\n    return (\r\n      <PhotoZoom\r\n        src={img}\r\n        className=\"image-style\"\r\n        zoom={zoom.current}\r\n        background=\"#000\"\r\n        alt={postTitle}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Spinner\r\n      animation=\"border\"\r\n      role=\"status\"\r\n      ref={imgRef}\r\n      style={{\r\n        width: '100px',\r\n        height: '100px',\r\n        margin: 'auto',\r\n        display: 'block',\r\n      }}\r\n    >\r\n      <span className=\"sr-only\">Loading...</span>\r\n    </Spinner>\r\n  );\r\n};\r\n\r\nexport default Photo;\r\n","export const tsars = [\r\n  { name: 'Petr 1', imperator: 'petr1', photoPath: '/images/petr1.jpg' },\r\n  {\r\n    name: 'Ekaterina 1',\r\n    imperator: 'ekaterina1',\r\n    photoPath: '/images/ekaterina1.jpg',\r\n  },\r\n  { name: 'Petr 2', imperator: 'petr2', photoPath: '/images/petr2.jpg' },\r\n  { name: 'Anna Ioannovna', imperator: 'anna', photoPath: '/images/anna.jpg' },\r\n  {\r\n    name: 'Ioann Antonovich',\r\n    imperator: 'anton',\r\n    photoPath: '/images/anton.jpg',\r\n  },\r\n  {\r\n    name: 'Elizaveta',\r\n    imperator: 'elizaveta',\r\n    photoPath: '/images/elizaveta.jpg',\r\n  },\r\n  { name: 'Petr 3', imperator: 'petr3', photoPath: '/images/petr3.jpg' },\r\n  {\r\n    name: 'Ekaterina 2',\r\n    imperator: 'ekaterina2',\r\n    photoPath: '/images/ekaterina2.jpg',\r\n  },\r\n  { name: 'Pavel 1', imperator: 'pavel1', photoPath: '/images/pavel1.jpg' },\r\n  {\r\n    name: 'Aleksandr 1',\r\n    imperator: 'aleksandr1',\r\n    photoPath: '/images/aleksandr1.jpg',\r\n  },\r\n  {\r\n    name: 'Nicolai 1',\r\n    imperator: 'nicolai1',\r\n    photoPath: '/images/nicolas1.jpg',\r\n  },\r\n  {\r\n    name: 'Aleksandr 2',\r\n    imperator: 'aleksandr2',\r\n    photoPath: '/images/aleksandr2.jpg',\r\n  },\r\n  {\r\n    name: 'Aleksandr 3',\r\n    imperator: 'aleksandr3',\r\n    photoPath: '/images/aleksandr3.jpg',\r\n  },\r\n  {\r\n    name: 'Nicolai 2',\r\n    imperator: 'nicolai2',\r\n    photoPath: '/images/nicolas2.jpg',\r\n  },\r\n  {\r\n    name: 'URSS',\r\n    imperator: 'urss',\r\n    photoPath: '/images/urss.jpg',\r\n  },\r\n];\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Button, Modal, Form } from 'react-bootstrap';\r\nimport '../styles/ConfirmModal.scss';\r\n\r\nconst ConfirmModal = ({\r\n  showModal,\r\n  setShowModal,\r\n  infoModal,\r\n  executeInMenuItem,\r\n}) => {\r\n  const [comment, setComment] = useState('');\r\n\r\n  useEffect(() => {\r\n    setComment(infoModal.body);\r\n  }, [showModal, infoModal.body]);\r\n\r\n  const handleClose = () => {\r\n    setShowModal(false);\r\n  };\r\n\r\n  return (\r\n    <Modal show={showModal} onHide={handleClose} keyboard={false}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>{infoModal.header}</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        {infoModal.position === (0 || 2) ? (\r\n          infoModal.body\r\n        ) : (\r\n          <Form.Group controlId=\"messageFooter\">\r\n            <Form.Control\r\n              as=\"textarea\"\r\n              rows={3}\r\n              defaultValue={comment}\r\n              onChange={(e) => setComment(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n        )}\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={handleClose}>\r\n          Close\r\n        </Button>\r\n        <Button\r\n          variant=\"primary\"\r\n          onClick={() => executeInMenuItem(infoModal.position, comment)}\r\n        >\r\n          {infoModal.footer}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ConfirmModal;\r\n","import React from 'react';\n/**\n * Iterates through children that are typically specified as `props.children`,\n * but only maps over children that are \"valid elements\".\n *\n * The mapFunction provided index will be normalised to the components mapped,\n * so an invalid component would not increase the index.\n *\n */\n\nfunction map(children, func) {\n  var index = 0;\n  return React.Children.map(children, function (child) {\n    return React.isValidElement(child) ? func(child, index++) : child;\n  });\n}\n/**\n * Iterates through children that are \"valid elements\".\n *\n * The provided forEachFunc(child, index) will be called for each\n * leaf child with the index reflecting the position relative to \"valid components\".\n */\n\n\nfunction forEach(children, func) {\n  var index = 0;\n  React.Children.forEach(children, function (child) {\n    if (React.isValidElement(child)) func(child, index++);\n  });\n}\n\nexport { map, forEach };","export const DELETE_IMAGE_SUCCESS = 'DELETE_IMAGE_SUCCESS';\r\nexport const DELETE_IMAGE_REQUEST = 'DELETE_IMAGE_REQUEST';\r\nexport const DELETE_IMAGE_FAIL = 'DELETE_IMAGE_FAIL';\r\n","import {\r\n  DELETE_IMAGE_REQUEST,\r\n  DELETE_IMAGE_SUCCESS,\r\n  DELETE_IMAGE_FAIL,\r\n} from '../constants/imageConstants';\r\nimport axios from 'axios';\r\nimport { storage } from '../firebase';\r\n\r\nexport const getAuthInfo = (getState) => {\r\n  const {\r\n    userLogin: { userInfo },\r\n  } = getState();\r\n  return setHeaderToken(userInfo);\r\n};\r\n\r\nexport const setHeaderToken = (userInfo) => {\r\n  let userToken;\r\n  if (userInfo !== null) {\r\n    userToken = userInfo.token;\r\n  } else {\r\n    userToken = userInfo;\r\n  }\r\n  return {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${userToken}`,\r\n    },\r\n  };\r\n};\r\n\r\nexport const deleteImage = (property) => async (dispatch, getState) => {\r\n  const config = getAuthInfo(getState);\r\n  const { idPhoto } = property;\r\n  const {\r\n    postOne: { post },\r\n  } = getState();\r\n\r\n  try {\r\n    dispatch({ type: DELETE_IMAGE_REQUEST });\r\n    const { data } = await axios.put('/api/img/delete-img', property, config);\r\n    dispatch({ type: DELETE_IMAGE_SUCCESS, payload: data.message });\r\n\r\n    const newPhotos = post.photos.filter((item) => {\r\n      return item.photo._id !== idPhoto;\r\n    });\r\n    dispatch({\r\n      type: 'POST_ONE_SUCCESS',\r\n      payload: { ...post, photos: newPhotos },\r\n    });\r\n\r\n    // const deletePhoto = post.photos.splice(indexPhoto, 1);\r\n  } catch (error) {\r\n    dispatch({\r\n      type: DELETE_IMAGE_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const deleteImageFirebase = (property, pathFirebaseUrlImg) => async (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  const config = getAuthInfo(getState);\r\n  const { idPhoto } = property;\r\n  const {\r\n    postOne: { post },\r\n  } = getState();\r\n\r\n  try {\r\n    dispatch({ type: DELETE_IMAGE_REQUEST });\r\n    const { data } = await axios.put('/api/img/delete/image', property, config);\r\n    dispatch({ type: DELETE_IMAGE_SUCCESS, payload: data.message });\r\n\r\n    const newPhotos = post.photos.filter((item) => {\r\n      return item.photo._id !== idPhoto;\r\n    });\r\n    dispatch({\r\n      type: 'POST_ONE_SUCCESS',\r\n      payload: { ...post, photos: newPhotos },\r\n    });\r\n\r\n    // `post/${userInfo.user.tokenUser}`\r\n    const deleteImg = storage.ref(pathFirebaseUrlImg);\r\n    deleteImg\r\n      .delete()\r\n      .then((res) => {\r\n        // File deleted successfully\r\n      })\r\n      .catch((error) => {\r\n        // Uh-oh, an error occurred!\r\n      });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: DELETE_IMAGE_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n","import React from 'react';\r\nimport { Form, Button } from 'react-bootstrap';\r\nimport { tsars } from '../outils/TsarList';\r\nimport '../styles/CEPostForm.scss';\r\n\r\nconst CEPostForm = ({\r\n  children,\r\n  submitHandler,\r\n  title,\r\n  setTitle,\r\n  bitkin,\r\n  setBitkin,\r\n  petrov,\r\n  setPetrov,\r\n  imperator,\r\n  setImperator,\r\n  link_video,\r\n  setLink_video,\r\n  certificate,\r\n  setCertificate,\r\n  description,\r\n  setDescription,\r\n  textBtn,\r\n  type,\r\n}) => {\r\n  const certificates = [\r\n    { name: 'Choose certification', value: 'choose' },\r\n    { name: 'No slabe', value: 'None' },\r\n    { name: 'NGC', value: 'NGC' },\r\n    { name: 'PCGS', value: 'PCGS' },\r\n  ];\r\n\r\n  const checkFlagScreen = (value) => {\r\n    if (type === 'edit') {\r\n      if (value === 'certificate') {\r\n        return certificate;\r\n      } else if (value === 'imperator') {\r\n        return imperator;\r\n      }\r\n    } else {\r\n      if (value === 'certificate') {\r\n        return 'Choose certification';\r\n      } else if (value === 'imperator') {\r\n        return 'Choose an Imperator';\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form onSubmit={submitHandler} className=\"createandedit__panel\">\r\n        <div className=\"createandedit__panel_left\">\r\n          <Form.Group controlId=\"title\">\r\n            <Form.Label>Title *</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"Enter title\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n            ></Form.Control>\r\n          </Form.Group>\r\n          <Form.Group controlId=\"bitkin\">\r\n            <Form.Label>Bitkin *</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"Enter bitkin\"\r\n              value={bitkin}\r\n              onChange={(e) => setBitkin(e.target.value)}\r\n            ></Form.Control>\r\n          </Form.Group>\r\n          <Form.Group controlId=\"petrov\">\r\n            <Form.Label>Petrov *</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"Enter petrov\"\r\n              value={petrov}\r\n              onChange={(e) => setPetrov(e.target.value)}\r\n            ></Form.Control>\r\n          </Form.Group>\r\n          <Form.Group controlId=\"link_video\">\r\n            <Form.Label>Link video</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              placeholder=\"Enter link video\"\r\n              value={link_video}\r\n              onChange={(e) => setLink_video(e.target.value)}\r\n            ></Form.Control>\r\n          </Form.Group>\r\n        </div>\r\n        <div className=\"createandedit__panel_right\">\r\n          <Form.Group controlId=\"imperator\">\r\n            <Form.Label>Imperators *</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              value={checkFlagScreen('imperator')}\r\n              onChange={(e) => setImperator(e.target.value)}\r\n            >\r\n              <option disabled>Choose an Imperator</option>\r\n              {tsars.map((tsar, index) => (\r\n                <option key={index} value={tsar.imperator}>\r\n                  {tsar.name}\r\n                </option>\r\n              ))}\r\n            </Form.Control>\r\n          </Form.Group>\r\n          <Form.Group controlId=\"certificate\">\r\n            <Form.Label>Certificate *</Form.Label>\r\n            <Form.Control\r\n              as=\"select\"\r\n              value={checkFlagScreen('certificate')}\r\n              onChange={(e) => setCertificate(e.target.value)}\r\n            >\r\n              {certificates.map((certif, index) => (\r\n                <option key={index} value={certif.value}>\r\n                  {certif.name}\r\n                </option>\r\n              ))}\r\n            </Form.Control>\r\n          </Form.Group>\r\n          <Form.Group controlId=\"description\">\r\n            <Form.Label>Description *</Form.Label>\r\n            <Form.Control\r\n              as=\"textarea\"\r\n              rows={2}\r\n              placeholder=\"Enter your description\"\r\n              value={description}\r\n              onChange={(e) => setDescription(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Button className=\"btn__edit_post\" type=\"submit\" variant=\"primary\">\r\n            {textBtn}\r\n          </Button>\r\n          <Form.Group>{children}</Form.Group>\r\n        </div>\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\nexport default CEPostForm;\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { cloneElement } from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { map } from './ElementChildren';\nvar ROUND_PRECISION = 1000;\n/**\n * Validate that children, if any, are instances of `<ProgressBar>`.\n */\n\nfunction onlyProgressBar(props, propName, componentName) {\n  var children = props[propName];\n\n  if (!children) {\n    return null;\n  }\n\n  var error = null;\n  React.Children.forEach(children, function (child) {\n    if (error) {\n      return;\n    }\n    /**\n     * Compare types in a way that works with libraries that patch and proxy\n     * components like react-hot-loader.\n     *\n     * see https://github.com/gaearon/react-hot-loader#checking-element-types\n     */\n\n\n    var element = /*#__PURE__*/React.createElement(ProgressBar, null);\n    if (child.type === element.type) return;\n    var childType = child.type;\n    var childIdentifier = React.isValidElement(child) ? childType.displayName || childType.name || childType : child;\n    error = new Error(\"Children of \" + componentName + \" can contain only ProgressBar \" + (\"components. Found \" + childIdentifier + \".\"));\n  });\n  return error;\n}\n\nvar defaultProps = {\n  min: 0,\n  max: 100,\n  animated: false,\n  isChild: false,\n  srOnly: false,\n  striped: false\n};\n\nfunction getPercentage(now, min, max) {\n  var percentage = (now - min) / (max - min) * 100;\n  return Math.round(percentage * ROUND_PRECISION) / ROUND_PRECISION;\n}\n\nfunction renderProgressBar(_ref, ref) {\n  var _classNames;\n\n  var min = _ref.min,\n      now = _ref.now,\n      max = _ref.max,\n      label = _ref.label,\n      srOnly = _ref.srOnly,\n      striped = _ref.striped,\n      animated = _ref.animated,\n      className = _ref.className,\n      style = _ref.style,\n      variant = _ref.variant,\n      bsPrefix = _ref.bsPrefix,\n      props = _objectWithoutPropertiesLoose(_ref, [\"min\", \"now\", \"max\", \"label\", \"srOnly\", \"striped\", \"animated\", \"className\", \"style\", \"variant\", \"bsPrefix\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref\n  }, props, {\n    role: \"progressbar\",\n    className: classNames(className, bsPrefix + \"-bar\", (_classNames = {}, _classNames[\"bg-\" + variant] = variant, _classNames[bsPrefix + \"-bar-animated\"] = animated, _classNames[bsPrefix + \"-bar-striped\"] = animated || striped, _classNames)),\n    style: _extends({\n      width: getPercentage(now, min, max) + \"%\"\n    }, style),\n    \"aria-valuenow\": now,\n    \"aria-valuemin\": min,\n    \"aria-valuemax\": max\n  }), srOnly ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sr-only\"\n  }, label) : label);\n}\n\nvar ProgressBar = React.forwardRef(function (_ref2, ref) {\n  var isChild = _ref2.isChild,\n      props = _objectWithoutPropertiesLoose(_ref2, [\"isChild\"]);\n\n  props.bsPrefix = useBootstrapPrefix(props.bsPrefix, 'progress');\n\n  if (isChild) {\n    return renderProgressBar(props, ref);\n  }\n\n  var min = props.min,\n      now = props.now,\n      max = props.max,\n      label = props.label,\n      srOnly = props.srOnly,\n      striped = props.striped,\n      animated = props.animated,\n      bsPrefix = props.bsPrefix,\n      variant = props.variant,\n      className = props.className,\n      children = props.children,\n      wrapperProps = _objectWithoutPropertiesLoose(props, [\"min\", \"now\", \"max\", \"label\", \"srOnly\", \"striped\", \"animated\", \"bsPrefix\", \"variant\", \"className\", \"children\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref\n  }, wrapperProps, {\n    className: classNames(className, bsPrefix)\n  }), children ? map(children, function (child) {\n    return cloneElement(child, {\n      isChild: true\n    });\n  }) : renderProgressBar({\n    min: min,\n    now: now,\n    max: max,\n    label: label,\n    srOnly: srOnly,\n    striped: striped,\n    animated: animated,\n    bsPrefix: bsPrefix,\n    variant: variant\n  }, ref));\n});\nProgressBar.displayName = 'ProgressBar';\nProgressBar.defaultProps = defaultProps;\nexport default ProgressBar;","import React, { useRef, useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { ProgressBar } from 'react-bootstrap';\r\nimport axios, { CancelToken } from 'axios';\r\nimport { storage } from '../firebase';\r\nimport '../styles/DropZone.scss';\r\n\r\nconst Dropzone = ({ id }) => {\r\n  const [uploadPercentage, setUploadPercentage] = useState(0);\r\n  const cancelFileUpload = useRef(null);\r\n\r\n  const fileInputRef = useRef(); // Click on Input type=file\r\n  const modalImageRef = useRef(); // Display modal image\r\n  const modalRef = useRef(); // Display modal progress\r\n  const uploadRef = useRef();\r\n  const uploadModalRef = useRef();\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [validFiles, setValidFiles] = useState([]);\r\n  const [unsupportedFiles, setUnsupportedFiles] = useState([]);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const { userInfo } = useSelector((state) => state.userLogin);\r\n\r\n  useEffect(() => {\r\n    let filteredArr = selectedFiles.reduce((acc, current) => {\r\n      const x = acc.find((item) => item.name === current.name);\r\n      if (!x) {\r\n        return acc.concat([current]);\r\n      } else {\r\n        return acc;\r\n      }\r\n    }, []);\r\n    setValidFiles([...filteredArr]);\r\n  }, [selectedFiles, id]);\r\n\r\n  /**TODO: Event Drag&Drop */\r\n  const dragOver = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const dragEnter = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const dragLeave = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const fileDrop = (e) => {\r\n    e.preventDefault();\r\n    const files = e.dataTransfer.files;\r\n    if (files.length) {\r\n      handleFiles(files);\r\n    }\r\n  };\r\n\r\n  const filesSelected = () => {\r\n    if (fileInputRef.current.files.length) {\r\n      handleFiles(fileInputRef.current.files);\r\n    }\r\n  };\r\n\r\n  // When clicked on Input\r\n  const fileInputClicked = () => {\r\n    fileInputRef.current.click();\r\n  };\r\n\r\n  /**TODO: File system ADD REMOVE */\r\n  const handleFiles = (files) => {\r\n    for (let i = 0; i < files.length; i++) {\r\n      if (validateFile(files[i])) {\r\n        setSelectedFiles((prevArray) => [...prevArray, files[i]]);\r\n      } else {\r\n        files[i]['invalid'] = true;\r\n        setSelectedFiles((prevArray) => [...prevArray, files[i]]);\r\n        setErrorMessage('File type not permitted');\r\n        setUnsupportedFiles((prevArray) => [...prevArray, files[i]]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const removeFile = (name) => {\r\n    const index = validFiles.findIndex((e) => e.name === name);\r\n    const index2 = selectedFiles.findIndex((e) => e.name === name);\r\n    const index3 = unsupportedFiles.findIndex((e) => e.name === name);\r\n    validFiles.splice(index, 1);\r\n    selectedFiles.splice(index2, 1);\r\n    setValidFiles([...validFiles]);\r\n    setSelectedFiles([...selectedFiles]);\r\n    if (index3 !== -1) {\r\n      unsupportedFiles.splice(index3, 1);\r\n      setUnsupportedFiles([...unsupportedFiles]);\r\n    }\r\n  };\r\n\r\n  /**TODO: Formating type */\r\n  const validateFile = (file) => {\r\n    const validTypes = [\r\n      'image/jpeg',\r\n      'image/jpg',\r\n      'image/png',\r\n      'image/gif',\r\n      'image/x-icon',\r\n    ];\r\n    if (validTypes.indexOf(file.type) === -1) {\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const fileSize = (size) => {\r\n    // size = 78934 Bytes\r\n    if (size === 0) {\r\n      return '0 Bytes';\r\n    }\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n    // Math.log(size)=11.27636733   Math.log(k)=6.93147180\r\n    const i = Math.floor(Math.log(size) / Math.log(k)); // Math.floor(1.999)=1\r\n    return parseFloat((size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const fileType = (fileName) => {\r\n    return (\r\n      fileName.substring(fileName.lastIndexOf('.') + 1, fileName.length) ||\r\n      fileName\r\n    );\r\n  };\r\n\r\n  /**TODO: Display/ Close Modals  */\r\n  const openImageModal = (file) => {\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    const reader = new FileReader();\r\n    modalRef.current.style.display = 'block';\r\n    reader.readAsDataURL(file);\r\n    reader.onload = (e) => {\r\n      modalImageRef.current.style.backgroundImage = `url(${e.target.result})`;\r\n    };\r\n  };\r\n\r\n  const closeModal = () => {\r\n    modalRef.current.style.display = 'none';\r\n    modalImageRef.current.style.backgroundImage = 'none';\r\n  };\r\n\r\n  const cancelUpload = () => {\r\n    if (cancelFileUpload.current) {\r\n      cancelFileUpload.current('You cancelled uploading ');\r\n    }\r\n    uploadModalRef.current.style.display = 'none';\r\n  };\r\n\r\n  /**TODO: Execute Http method POST Axios with Firebase Storage*/\r\n  const uploadFiles = async () => {\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    uploadModalRef.current.style.display = 'block';\r\n    uploadRef.current.innerHTML = 'File(s) Uploading...';\r\n\r\n    for (const image of validFiles) {\r\n      firebaseImg(image, createImgUrl(image));\r\n    }\r\n  };\r\n  // Store path firebase Image\r\n  const createImgUrl = (img) => {\r\n    return `post/${userInfo.user.tokenUser}/${img.name}`;\r\n  };\r\n\r\n  const firebaseImg = (image, path) => {\r\n    const uploadTaks = storage.ref(path).put(image);\r\n    uploadTaks.on(\r\n      'state_changed',\r\n      (snapshot) => {\r\n        let percent = Math.round(\r\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n        );\r\n        if (percent < 100) {\r\n          setUploadPercentage(percent);\r\n        }\r\n      },\r\n      (error) => {},\r\n      () => {\r\n        storage\r\n          .ref(`post/${userInfo.user.tokenUser}`)\r\n          .child(image.name)\r\n          .getDownloadURL()\r\n          .then((url) => {\r\n            const objImage = {\r\n              postId: id,\r\n              imgName: image.name,\r\n              link: url,\r\n            };\r\n\r\n            axios\r\n              .post('/api/img/post/image', objImage, {\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  Authorization: `Bearer ${userInfo.token}`,\r\n                },\r\n                onUploadProgress: (progressEvent) => {\r\n                  let percent = Math.floor(\r\n                    (progressEvent.loaded / progressEvent.total) * 100\r\n                  );\r\n                  if (percent < 100) {\r\n                    setUploadPercentage(percent);\r\n                  }\r\n                },\r\n                cancelToken: new CancelToken(\r\n                  (cancel) => (cancelFileUpload.current = cancel)\r\n                ),\r\n              })\r\n              .then(() => {\r\n                setUploadPercentage(100);\r\n                uploadRef.current.innerHTML = 'File(s) Uploaded';\r\n                validFiles.length = 0;\r\n                setValidFiles([...validFiles]);\r\n                setSelectedFiles([...validFiles]);\r\n                setUnsupportedFiles([...validFiles]);\r\n                setTimeout(() => {\r\n                  setUploadPercentage(0);\r\n                  uploadModalRef.current.style.display = 'none';\r\n                }, 2000);\r\n              })\r\n              .catch((err) => {\r\n                // console.log('err: ', err);\r\n                uploadRef.current.innerHTML = `<span class=\"error\">Error Uploading File(s)</span>`;\r\n              });\r\n          });\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container-zone\">\r\n        {unsupportedFiles.length === 0 && validFiles.length ? (\r\n          <button className=\"file-upload-btn\" onClick={() => uploadFiles()}>\r\n            Upload Files\r\n          </button>\r\n        ) : (\r\n          ''\r\n        )}\r\n        {unsupportedFiles.length ? (\r\n          <p>Please remove all unsupported files.</p>\r\n        ) : (\r\n          ''\r\n        )}\r\n        <div\r\n          className=\"drop-container\"\r\n          onDragOver={dragOver}\r\n          onDragEnter={dragEnter}\r\n          onDragLeave={dragLeave}\r\n          onDrop={fileDrop}\r\n          onClick={fileInputClicked}\r\n        >\r\n          <div className=\"drop-message\">\r\n            <div className=\"upload-icon\"></div>\r\n            Drag & Drop files here or click to select file(s)\r\n          </div>\r\n\r\n          <input\r\n            type=\"file\"\r\n            className=\"file-input\"\r\n            multiple\r\n            onChange={filesSelected}\r\n            ref={fileInputRef}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"file-display-container\">\r\n          {validFiles.map((data, i) => (\r\n            <div className=\"file-status-bar\" key={i}>\r\n              <div className=\"file-type-logo\"></div>\r\n              <div className=\"file-type-text\">{fileType(data.name)}</div>\r\n              <span\r\n                onClick={\r\n                  !data.invalid\r\n                    ? () => openImageModal(data)\r\n                    : () => removeFile(data.name)\r\n                }\r\n                className={`file-name ${data.invalid ? 'file-error' : ''}`}\r\n              >\r\n                {data.name}\r\n              </span>\r\n              <span className=\"file-size\">({fileSize(data.size)})</span>\r\n              <i\r\n                className=\"fas fa-trash file-remove\"\r\n                onClick={() => removeFile(data.name)}\r\n              ></i>\r\n              {data.invalid && (\r\n                <span className=\"file-error-message\">({errorMessage})</span>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"display-image\" ref={modalRef}>\r\n        <div className=\"overlay\"></div>\r\n        <div className=\"modal-image\" ref={modalImageRef}>\r\n          <span className=\"close-dropzone\" onClick={() => closeModal()}>\r\n            X\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"upload-modal\" ref={uploadModalRef}>\r\n        <div className=\"overlay\"></div>\r\n        <div className=\"progress-container\">\r\n          <div className=\"close-dropzone\" onClick={() => cancelUpload()}>\r\n            X\r\n          </div>\r\n          <span ref={uploadRef}></span>\r\n          <ProgressBar\r\n            now={uploadPercentage}\r\n            label={`${uploadPercentage}%`}\r\n            variant=\"info\"\r\n            striped\r\n          />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Dropzone;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { onePost, editPost } from '../actions/postActions';\r\nimport { POST_ONE_RESET } from '../constants/postConstants';\r\nimport { deleteImageFirebase } from '../actions/imageActions';\r\nimport LoadAndErrorContainer from '../containers/LoadAndErrorContainer';\r\nimport CEPostForm from '../components/CEPostForm';\r\nimport DropZone from '../components/DropZone ';\r\nimport Photo from '../components/Photo';\r\nimport ConfirmModal from '../Modal/ConfirmModal';\r\nimport '../styles/EditScreen.scss';\r\n\r\nconst EditPost = ({ history, match }) => {\r\n  const postId = match.params.id;\r\n  const [idImage, setIdImage] = useState(null);\r\n  const [pathFirebaseImg, setPathFirebaseImg] = useState('');\r\n  const [title, setTitle] = useState('');\r\n  const [certificate, setCertificate] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [bitkin, setBitkin] = useState('');\r\n  const [petrov, setPetrov] = useState('');\r\n  const [imperator, setImperator] = useState('');\r\n  const [link_video, setLink_video] = useState('');\r\n  const [photos, setPhotos] = useState([]);\r\n  let [showModal, setShowModal] = useState(false);\r\n  let [infoModal, setInfoModal] = useState({\r\n    header: '',\r\n    body: '',\r\n    footer: '',\r\n  });\r\n  const firstElement = useRef(null);\r\n\r\n  const dispatch = useDispatch();\r\n  const { userInfo } = useSelector((state) => state.userLogin);\r\n  const { loading, post } = useSelector((state) => state.postOne);\r\n\r\n  useEffect(() => {\r\n    if (!post) {\r\n      dispatch(onePost(postId));\r\n    } else {\r\n      setTitle(post.title);\r\n      setCertificate(post.certificate);\r\n      setDescription(post.description);\r\n      setBitkin(post.bitkin);\r\n      setPetrov(post.petrov);\r\n      setImperator(post.imperator);\r\n      setLink_video(post.link_video);\r\n      setPhotos(post.photos);\r\n    }\r\n    return () => post && dispatch({ type: POST_ONE_RESET });\r\n  }, [dispatch, history, postId, post]);\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(\r\n      editPost(postId, {\r\n        title,\r\n        certificate,\r\n        description,\r\n        bitkin,\r\n        petrov,\r\n        imperator,\r\n        link_video,\r\n      })\r\n    );\r\n  };\r\n\r\n  const showConfirmModal = (value) => {\r\n    const {\r\n      photo: { _id, route, name },\r\n    } = value;\r\n    setShowModal(true);\r\n    setInfoModal({\r\n      position: 2,\r\n      header: 'Warning Image',\r\n      body: 'Do you want delete this image?',\r\n      footer: 'Delete Image',\r\n    });\r\n    setIdImage(_id);\r\n    setPathFirebaseImg(`${route}/${userInfo.user.tokenUser}/${name}`);\r\n  };\r\n\r\n  const removeImage = () => {\r\n    dispatch(deleteImageFirebase({ idPhoto: idImage }, pathFirebaseImg));\r\n    setShowModal(!showModal);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <LoadAndErrorContainer loading={loading} title=\"Modification\">\r\n        <div className=\"createandedit__post_form\" ref={firstElement}>\r\n          <CEPostForm\r\n            submitHandler={submitHandler}\r\n            title={title}\r\n            setTitle={setTitle}\r\n            bitkin={bitkin}\r\n            setBitkin={setBitkin}\r\n            petrov={petrov}\r\n            setPetrov={setPetrov}\r\n            imperator={imperator}\r\n            setImperator={setImperator}\r\n            link_video={link_video}\r\n            setLink_video={setLink_video}\r\n            certificate={certificate}\r\n            setCertificate={setCertificate}\r\n            description={description}\r\n            setDescription={setDescription}\r\n            type=\"edit\"\r\n            textBtn=\"Edit post\"\r\n          >\r\n            <DropZone id={postId} />\r\n          </CEPostForm>\r\n\r\n          {photos.length > 0 && (\r\n            <div className=\"photos\">\r\n              {photos.map((photo, index) => (\r\n                <div className=\"photos-edit\" key={index}>\r\n                  <Photo\r\n                    photo={photo.photo}\r\n                    countNumberPhotos={photos.length}\r\n                    postTitle=\"Photo coin\"\r\n                  />\r\n                  <i\r\n                    className=\"fas fa-trash-alt\"\r\n                    onClick={() => showConfirmModal(photo)}\r\n                  ></i>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          <ConfirmModal\r\n            showModal={showModal}\r\n            setShowModal={setShowModal}\r\n            infoModal={infoModal}\r\n            executeInMenuItem={removeImage}\r\n          />\r\n        </div>\r\n      </LoadAndErrorContainer>\r\n    </>\r\n  );\r\n};\r\nexport default EditPost;\r\n"],"sourceRoot":""}